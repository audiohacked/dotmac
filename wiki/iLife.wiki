#labels Phase-Deploy
== instructions on building from the iLife branch ==

= Introduction =

The developers have been using/developing on the iLife branch for over half a year now.
We think it's about time to push things towards stable.
We invite the daredevils amongst [http://dotmac.googlecode.com/svn/wiki/images/plotgraph.png you] to try installing from the iLife branch - and give us feedback.


= Install =

Install is globally the same as from trunk.
The first thing you'll notice when migrating is that your current setup will be broken; this is because we moved to a user db backend - which needs to be in sync with the .htdigest database.
The easiest way out (now) is re-creating your users with idiskAdmin (you won't lose any files (we hope) on idisk).

idiskAdmin features a new button 'Generate HTDigest Files' which you'll want to hit after changing/adding users. It syncs the user db with the .htdigest file.
Restarting Apache reflects your user changes.

SVN >= r274: 	
`Converted authentication to use mod_dbd (on RH distributions you will need to install apr-util-sqlite)`
This means your apache needs to sport `mod_dbd.so` and `mod_authn_dbd.so` - and gets rid of the htdigest files.
Make sure the 'private' folder is writable by Apache.  If your httpd version is too old, you can grab a dotmac.conf from an older SVN release for now. We might make this a configurable option.


Besides the perl modules needed for trunk we need a few more (available from CPAN):
 * LWP::UserAgent
 * JSON
 * POSIX
 * Compress::Zlib
 * Imager
 * Image::ExifTool
Before installing Imager, *you'll need to make sure to have jpeg headers installed*. On common linux distibutions these are packaged as libjpeg-devel. On Mac OS Leopard google is your friend.

(the list might not be complete - please let us know when you find missing modules)


==Gallery==
Getting gallery.yourdomain.com working requires you (besides configuring it in dotmac.conf) to replace the hardcoded 'yourdomain.com' some times.
 * ../cache/gallery.html (1x)
 * ../cache/g/javascripts/gallery.js (3x)
 * when yourdomain is not a `.com` domain - you also have to fix the extension in gallery.js. To do this, search for `.com` in gallery.js; it should be your 4th hit (at line #162 - saying: `return path.replace(/http:\/\/.+?\.com\/.+?\//,'');)`; replace `.com` with your extension. _we're looking for a more permanent solution_ Can people please verify if replacing the whole statement with `return path.replace(/http:\/\/.+?\.[a-zA-Z]{2,3}\/.+?\//,'');` works for them - and give feedback.


We've opened a [http://code.google.com/p/dotmac/issues/detail?id=88 new issue] where we hope to gather your experiences/issues. Please help us out making this page complete.


= Notes =

 * iPhoto and iWeb publishing have only been tested with iLife '08 with latest updates. We won't support earlier versions/revisions.
 * 